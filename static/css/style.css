/* ==== Variables ==== */
:root {
    --bg:#1b6d3f;  --bg2:#145331;  --bg3:#0f4528;
    --tx:#f0fdf4;  --tx2:#bbdfc9;  --tx3:#7cc49a;
    --acc:#34d67b; --acc-fg:#0a3a1e;
    --gold:#f5c542;
    --cbg:#fff;  --cbdr:#d4d8dc;  --csh:rgba(0,0,0,.10);
    --csel:#2e7cf6; --cselg:rgba(46,124,246,.30);
    --hud:rgba(15,69,40,.96);
    --ov:rgba(0,0,0,.55);
    --mbg:#fff; --mbdr:#e2e6ea; --mtx:#1e293b;
    --pass-bg:#78879a;
    --bbl:rgba(0,0,0,.18);
    --s-dia:#1d6fe0; --s-clb:#1a8c4e; --s-hrt:#d6293a; --s-spd:#23272e;
    --card-bg:#fff; --card-border:#d4d8dc;
    --card-inner:rgba(0,0,0,.04);
    --seat-bg:rgba(0,0,0,.08);
    --seat-on-bg:rgba(245,197,66,.12);
    --seat-on-ring:rgba(245,197,66,.35);
    --zone-min:52px;
    --btn-play:#2e7cf6; --btn-play-fg:#fff;
    --btn-pass:#5a6678; --btn-pass-fg:#fff;
    --title-bg:#0e3f24;
    --title-card-shadow:rgba(0,0,0,.18);
}
[data-theme="dark"] {
    --bg:#16162a;  --bg2:#101020;  --bg3:#1c1c34;
    --tx:#dfe4ec;  --tx2:#8e97a8;  --tx3:#5c6577;
    --acc:#7c82f8; --acc-fg:#fff;
    --gold:#f5c542;
    --cbg:#252540;  --cbdr:#3c3c5c;  --csh:rgba(0,0,0,.32);
    --csel:#818cf8; --cselg:rgba(129,140,248,.35);
    --hud:rgba(16,16,32,.96);
    --ov:rgba(0,0,0,.70);
    --mbg:#252540; --mbdr:#3c3c5c; --mtx:#dfe4ec;
    --pass-bg:#3e4555;
    --bbl:rgba(255,255,255,.06);
    --s-dia:#5b9cf5; --s-clb:#4cd98e; --s-hrt:#f27080; --s-spd:#bcc5d3;
    --card-bg:#2a2a48; --card-border:#44446a;
    --card-inner:rgba(255,255,255,.03);
    --seat-bg:rgba(255,255,255,.04);
    --seat-on-bg:rgba(245,197,66,.08);
    --seat-on-ring:rgba(245,197,66,.25);
    --btn-play:#6366f1; --btn-play-fg:#fff;
    --btn-pass:#3e4555; --btn-pass-fg:#bcc5d3;
    --title-bg:#0c0c1a;
    --title-card-shadow:rgba(0,0,0,.40);
}

/* ==== Reset ==== */
*{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%;overflow:hidden;touch-action:manipulation}
body{
    font-family:'SF Pro Display','SF Pro Text',-apple-system,BlinkMacSystemFont,'Segoe UI','PingFang SC','Microsoft YaHei',sans-serif;
    background:var(--bg); color:var(--tx);
    -webkit-tap-highlight-color:transparent;
    -webkit-user-select:none; user-select:none;
}
.hidden{display:none!important}

/* ==== Title ==== */
#title-screen{
    height:100vh;display:flex;align-items:center;justify-content:center;
    background:var(--title-bg);
    position:relative;overflow:hidden;
}
#title-screen::before{
    content:'';position:absolute;inset:0;
    background:repeating-conic-gradient(var(--title-bg) 0% 25%, transparent 0% 50%) 0 0/60px 60px;
    opacity:.12;pointer-events:none;
}
.title-wrap{
    text-align:center;position:relative;z-index:1;
    animation:titleIn .6s cubic-bezier(.22,1,.36,1);
}
@keyframes titleIn{from{opacity:0;transform:translateY(24px)}to{opacity:1;transform:translateY(0)}}

.title-cards{margin-bottom:20px;display:flex;justify-content:center;gap:0}
.title-cd{
    width:56px;height:80px;border-radius:10px;
    display:flex;flex-direction:column;align-items:center;justify-content:center;
    font-weight:900;font-size:22px;line-height:1;
    box-shadow:0 4px 16px var(--title-card-shadow);
    position:relative;
    transition:transform .3s cubic-bezier(.22,1,.36,1);
}
.title-cd::after{
    content:'';position:absolute;inset:5px;
    border:2px solid rgba(255,255,255,.25);border-radius:6px;
}
.title-cd:nth-child(1){background:#d6293a;color:#fff;transform:rotate(-12deg) translateX(8px);z-index:1}
.title-cd:nth-child(2){background:#1d6fe0;color:#fff;transform:translateY(-6px);z-index:3}
.title-cd:nth-child(3){background:#1a8c4e;color:#fff;transform:rotate(12deg) translateX(-8px);z-index:2}
.title-cd-sm{width:18px;height:18px;margin-top:4px}

.title-wrap h1{
    font-size:clamp(28px,7vw,42px);font-weight:900;
    letter-spacing:6px;color:var(--tx);
    margin-bottom:4px;
}
.sub{
    font-size:12px;color:var(--tx3);letter-spacing:5px;
    font-weight:500;margin-bottom:28px;text-transform:uppercase;
}
.title-features{
    display:flex;justify-content:center;gap:6px;
    margin-bottom:28px;flex-wrap:wrap;
}
.title-feat{
    font-size:10px;font-weight:700;letter-spacing:1.5px;
    color:var(--tx2);text-transform:uppercase;
    padding:5px 14px;
    border:1.5px solid rgba(255,255,255,.1);border-radius:20px;
    background:rgba(255,255,255,.04);
}
.btn-main{
    padding:14px 52px;font-size:15px;font-weight:800;
    color:var(--acc-fg);background:var(--acc);
    border:none;border-radius:12px;cursor:pointer;letter-spacing:4px;
    text-transform:uppercase;
    box-shadow:0 4px 0 rgba(0,0,0,.15);
    transition:transform .1s,box-shadow .1s;
    position:relative;top:0;
}
.btn-main:hover{transform:translateY(-1px);box-shadow:0 5px 0 rgba(0,0,0,.15)}
.btn-main:active{transform:translateY(2px);box-shadow:0 2px 0 rgba(0,0,0,.15);top:0}
.title-hint{
    font-size:10px;color:var(--tx3);
    margin-top:20px;letter-spacing:2px;font-weight:500;
    opacity:.5;
}

/* ==== Board ==== */
#board{
    height:100vh;display:flex;flex-direction:column;
    background:var(--bg);
}

/* HUD */
#hud{
    display:flex;justify-content:space-between;align-items:center;
    padding:0 16px;background:var(--hud);height:40px;flex-shrink:0;
    font-size:11px;color:var(--tx2);font-weight:700;
    letter-spacing:.5px;
    border-bottom:1px solid rgba(255,255,255,.06);
}
.hud-r{display:flex;align-items:center;gap:8px}
.btn-ico{
    width:30px;height:30px;display:flex;align-items:center;justify-content:center;
    background:0;border:1.5px solid rgba(255,255,255,.1);border-radius:8px;
    color:var(--tx2);cursor:pointer;transition:background .12s;
}
.btn-ico:hover{background:rgba(255,255,255,.08)}
.btn-hud{
    padding:5px 14px;font-size:10px;font-weight:700;
    color:var(--tx2);background:rgba(255,255,255,.05);
    border:1.5px solid rgba(255,255,255,.1);border-radius:8px;
    cursor:pointer;transition:background .12s;
    letter-spacing:1px;text-transform:uppercase;
}
.btn-hud:hover{background:rgba(255,255,255,.1)}

/* ==== Table ==== */
#table{
    flex:1;display:grid;
    grid-template-columns:auto 1fr auto;
    grid-template-rows:auto 1fr auto;
    min-height:0;overflow:hidden;
    padding:4px;gap:2px;
}
.seat-top{grid-column:1/4;grid-row:1}
.seat-left{grid-column:1;grid-row:2;align-self:center}
.seat-right{grid-column:3;grid-row:2;align-self:center}
#center{grid-column:2;grid-row:2;display:flex;align-items:center;justify-content:center}
.seat-btm{grid-column:1/4;grid-row:3}

/* ==== Seats ==== */
.seat{display:flex;flex-direction:column;align-items:center;gap:2px}
.tag{
    display:inline-flex;align-items:center;gap:6px;
    font-size:10px;font-weight:800;color:var(--tx2);
    padding:4px 12px 4px 7px;
    background:var(--seat-bg);border-radius:20px;
    margin:2px 0;white-space:nowrap;
    letter-spacing:.5px;text-transform:uppercase;
    transition:all .25s;
    border:1.5px solid transparent;
}
.dot{width:8px;height:8px;border-radius:50%;flex-shrink:0;
    box-shadow:inset 0 -1px 0 rgba(0,0,0,.15)}
.c-blue{background:#2e7cf6} .c-amber{background:#e8a317}
.c-red{background:#d6293a}  .c-violet{background:#8b6cf6}
.cnt{
    font-size:8px;color:var(--gold);font-weight:800;
    background:rgba(0,0,0,.2);padding:2px 6px;border-radius:8px;
    min-width:18px;text-align:center;letter-spacing:.5px;
}
.seat.on>.tag{
    color:var(--gold);
    background:var(--seat-on-bg);
    border-color:var(--seat-on-ring);
}
.seat.on .dot{box-shadow:0 0 0 2.5px var(--seat-on-ring),inset 0 -1px 0 rgba(0,0,0,.15)}

.seat-left,.seat-right{padding:0 4px;max-width:120px}
#center{min-width:60px}
#msg{
    font-size:11px;font-weight:800;color:var(--gold);
    text-align:center;min-height:20px;padding:0 8px;
    letter-spacing:.5px;
}

/* ==== Zone ==== */
.zone{
    display:flex;justify-content:center;flex-wrap:wrap;
    min-height:var(--zone-min);padding:3px;gap:1px;
}
.zone .cd{
    --w:38px;--h:54px;
    margin-left:-4px;cursor:default;
    animation:cardIn .25s cubic-bezier(.22,1,.36,1);
}
.zone .cd:first-child{margin-left:0}
.zone .cd .rt{font-size:9px;padding-left:3px}
.zone .cd .sm svg{width:12px;height:12px}
.zone .cd .rb{display:none}
.zone .cd .inner-oval{width:24px;height:32px}

@keyframes cardIn{
    0%{opacity:0;transform:translateY(-16px) scale(.8)}
    100%{opacity:1;transform:translateY(0) scale(1)}
}
.bubble{
    font-size:10px;font-weight:800;color:var(--tx3);
    padding:4px 14px;background:var(--bbl);border-radius:8px;
    align-self:center;animation:fadeUp .2s ease-out;
    letter-spacing:1px;text-transform:uppercase;
}
@keyframes fadeUp{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}

/* ==== Hand ==== */
#hand{
    display:flex;flex-wrap:nowrap;justify-content:center;
    padding:14px 8px 2px;
    gap:0;
    overflow-x:auto;
    overflow-y:visible;
    -webkit-overflow-scrolling:touch;
    scrollbar-width:none;
}
#hand::-webkit-scrollbar{display:none}

/* ==== Card (UNO-inspired) ==== */
.cd{
    --w:48px;--h:68px;
    width:var(--w);height:var(--h);
    background:var(--cbg);
    border-radius:8px;
    border:2px solid var(--cbdr);
    display:flex;flex-direction:column;
    align-items:center;justify-content:space-between;
    padding:2px 0;
    cursor:pointer;
    position:relative;
    margin-left:-12px;
    box-shadow:0 2px 6px var(--csh);
    transition:transform .15s cubic-bezier(.22,1,.36,1),
               border-color .12s,box-shadow .12s;
    flex-shrink:0;
}
.cd:first-child{margin-left:0}

/* inner oval - UNO style */
.inner-oval{
    position:absolute;
    top:50%;left:50%;
    width:32px;height:46px;
    transform:translate(-50%,-50%) rotate(-30deg);
    border-radius:50%;
    background:var(--card-inner);
    pointer-events:none;
}

@media(hover:hover){
    #hand .cd:hover{
        transform:translateY(-8px);
        box-shadow:0 6px 14px var(--csh);z-index:10;
    }
    #hand .cd.sel:hover{
        transform:translateY(-18px);
    }
}
#hand .cd.sel{
    transform:translateY(-16px);
    border-color:var(--csel);
    box-shadow:0 6px 18px var(--cselg);
    z-index:20;
}
#hand .cd.dh{
    border-color:var(--csel);
    box-shadow:0 0 8px var(--cselg);
}

.rt{font-size:12px;font-weight:900;align-self:flex-start;padding-left:4px;line-height:1;position:relative;z-index:1}
.sm{flex:1;display:flex;align-items:center;justify-content:center;position:relative;z-index:1}
.sm svg{width:18px;height:18px}
.rb{font-size:8px;font-weight:900;align-self:flex-end;padding-right:4px;transform:rotate(180deg);line-height:1;position:relative;z-index:1}

/* deal */
.cd.deal{animation:dealIn .35s cubic-bezier(.22,1,.36,1) both}
@keyframes dealIn{
    0%{opacity:0;transform:translateY(40px) scale(.6) rotate(-8deg)}
    100%{opacity:1;transform:translateY(0) scale(1) rotate(0)}
}

/* ==== Actions ==== */
#acts{display:flex;justify-content:center;gap:10px;padding:8px 0 6px}
.btn-act{
    padding:10px 30px;font-size:12px;font-weight:800;
    border:none;border-radius:10px;cursor:pointer;letter-spacing:2px;
    text-transform:uppercase;
    transition:transform .08s,opacity .1s;
    box-shadow:0 3px 0 rgba(0,0,0,.12);
    position:relative;top:0;
}
.btn-act:active{transform:translateY(2px);box-shadow:0 1px 0 rgba(0,0,0,.12)}
.btn-act:disabled{opacity:.25;cursor:not-allowed;transform:none!important;box-shadow:0 3px 0 rgba(0,0,0,.06)}
.b-play{background:var(--btn-play);color:var(--btn-play-fg)}
.b-pass{background:var(--btn-pass);color:var(--btn-pass-fg)}

/* ==== Modal ==== */
#overlay{
    position:fixed;inset:0;background:var(--ov);
    display:flex;align-items:center;justify-content:center;z-index:1000;
    animation:fadeIn .2s ease-out;
}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
#modal{
    background:var(--mbg);border-radius:16px;
    padding:32px 48px;text-align:center;
    box-shadow:0 20px 50px rgba(0,0,0,.35);
    border:1.5px solid var(--mbdr);
    animation:modalIn .3s cubic-bezier(.22,1,.36,1);
    color:var(--mtx);
}
@keyframes modalIn{from{opacity:0;transform:scale(.88)}to{opacity:1;transform:scale(1)}}
#m-ico{margin-bottom:12px}
#m-txt{font-size:22px;font-weight:900;margin-bottom:20px;letter-spacing:3px}
.cw{color:#e8a317}.cl{color:#78879a}

/* ==== Mobile ==== */
@media(max-width:640px){
    #table{padding:2px 2px 0;gap:1px}
    .cd{--w:40px;--h:58px;margin-left:-12px;border-radius:7px}
    .inner-oval{width:28px;height:40px}
    .rt{font-size:10px;padding-left:3px}
    .sm svg{width:15px;height:15px}
    .rb{font-size:7px}
    .zone{min-height:46px;padding:1px}
    .zone .cd{--w:30px;--h:42px;margin-left:-6px;border-radius:6px}
    .zone .cd .rt{font-size:8px}
    .zone .cd .sm svg{width:10px;height:10px}
    .zone .cd .inner-oval{width:18px;height:24px}
    .seat-left,.seat-right{max-width:80px;padding:0 2px}
    #center{min-width:38px}
    #hand{padding:10px 6px 2px;justify-content:flex-start}
    .btn-act{padding:10px 24px;font-size:12px;min-width:110px;border-radius:14px}
    #hud{height:36px;padding:0 12px;font-size:10px}
    .btn-main{padding:12px 34px;font-size:14px}
    .tag{font-size:9px;padding:3px 9px 3px 5px}
    .cnt{font-size:7px;padding:1px 5px}
    .title-cd{width:48px;height:68px;font-size:18px;border-radius:8px}
    .title-cd::after{inset:4px;border-radius:5px}
    .title-cd-sm{width:14px;height:14px}
    #acts{padding:10px 0 calc(env(safe-area-inset-bottom,4px) + 6px)}
    --zone-min:40px;
}

@media(max-width:380px){
    .cd{--w:36px;--h:52px;margin-left:-11px}
    .rt{font-size:9px}
    .sm svg{width:13px;height:13px}
    .title-cd{width:42px;height:60px;font-size:16px}
    .btn-act{min-width:96px;padding:9px 18px}
}

.seat-btm{padding-bottom:env(safe-area-inset-bottom,4px)}

/* ==== Visual polish (v2) ==== */
body{
    background:
        radial-gradient(circle at 12% 15%, rgba(255,255,255,.16), transparent 30%),
        radial-gradient(circle at 88% 20%, rgba(255,255,255,.10), transparent 28%),
        linear-gradient(150deg, var(--bg), var(--bg2) 40%, var(--bg3));
}

#table{backdrop-filter:none}

#hud{border:1px solid rgba(255,255,255,.08);box-shadow:none}

.tag{
    background:linear-gradient(180deg, rgba(255,255,255,.15), rgba(255,255,255,.05));
    border:1px solid rgba(255,255,255,.16);
}

.btn-main{background:linear-gradient(145deg, #3fd486, #1fb466);box-shadow:0 6px 14px rgba(22,80,46,.25)}
.btn-main:hover{transform:translateY(-1px) scale(1.01)}

.btn-act{box-shadow:0 4px 10px rgba(0,0,0,.18)}

.cd{
    transition:transform .12s ease, box-shadow .12s ease;
}
.cd:hover{transform:translateY(-2px);box-shadow:0 6px 12px rgba(0,0,0,.14)}

.quick-rules{
    width:min(480px, 92vw);
    text-align:left;
    background:rgba(255,255,255,.10);
    border:1px solid rgba(255,255,255,.18);
    border-radius:12px;
    padding:10px 14px;
    margin:10px 0 14px;
    color:#eef9f2;
}
.quick-rules h3{
    margin:0 0 6px;
    font-size:14px;
    letter-spacing:1px;
    color:#fff7d1;
}
.quick-rules ul{
    margin:0;
    padding-left:18px;
    font-size:12px;
    line-height:1.5;
}

#center #msg{
    background:rgba(13, 27, 20, .42);
    border:1px solid rgba(255,255,255,.16);
    box-shadow:0 8px 20px rgba(0,0,0,.22);
    backdrop-filter: blur(2px);
}

/* ==== Optional local card image pack ==== */
.cd.use-img{
    overflow:hidden;
    background:#fff;
}
.cd-img{
    position:absolute;
    inset:0;
    width:100%;
    height:100%;
    object-fit:cover;
    border-radius:inherit;
    z-index:3;
}
.cd.use-img .inner-oval,
.cd.use-img .rt,
.cd.use-img .sm,
.cd.use-img .rb{
    opacity:0;
}
